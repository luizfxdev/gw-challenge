# ======================== CONFIGURAÇÃO PRINCIPAL DO SPRING BOOT ========================
# Este arquivo contém todas as configurações necessárias para a aplicação rodar corretamente
# Inclui banco de dados, JPA/Hibernate, servidor e logging

spring:
  # ======================== CONFIGURAÇÃO DA FONTE DE DADOS (DATASOURCE) ========================
  # Define como a aplicação se conecta ao PostgreSQL
  datasource:
    # URL de conexão com o banco de dados PostgreSQL
    # localhost:5432 = servidor local na porta padrão do PostgreSQL
    # gwchallenge = nome do banco de dados
    url: jdbc:postgresql://localhost:5432/gwchallenge
    # Usuário do banco de dados PostgreSQL
    username: postgres
    # Senha do usuário postgres
    password: minhasenha123
    # Driver JDBC específico para PostgreSQL
    # Permite que o Spring se comunique com o banco PostgreSQL
    driver-class-name: org.postgresql.Driver

  # ======================== CONFIGURAÇÃO DO JPA/HIBERNATE ========================
  # JPA (Java Persistence API) é a interface padrão para acesso a dados
  # Hibernate é a implementação ORM (Object-Relational Mapping) que usamos
  jpa:
    # hibernate.ddl-auto controla como o Hibernate gerencia o schema do banco
    # update = Atualiza o schema automaticamente sem deletar dados existentes
    hibernate:
      ddl-auto: update
    # show-sql: true = Exibe as queries SQL no console (útil para debug)
    show-sql: true
    # properties.hibernate.format_sql: true = Formata as queries para melhor legibilidade
    properties:
      hibernate:
        format_sql: true
        # dialect: Define qual banco de dados estamos usando
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # ======================== CONFIGURAÇÃO DO SERVIDOR ========================
  # Define porta, contexto e outras configurações do servidor
  servlet:
    # context-path: /api = Todas as rotas serão prefixadas com /api
    # Ex: /auth/login vira /api/auth/login
    context-path: /api

# ======================== CONFIGURAÇÃO DO SERVIDOR TOMCAT ========================
server:
  # port: 8080 = A aplicação rodará na porta 8080
  port: 8080
  # servlet.context-path: /api = Prefixo para todas as rotas
  servlet:
    context-path: /api

  # ======================== CONFIGURAÇÃO DE TRATAMENTO DE ERROS ========================
  error:
    # include-message: always = Sempre inclui a mensagem de erro nas respostas
    # Ajuda o cliente a entender o que deu errado
    include-message: always
    # include-stacktrace: never = Nunca expõe o stacktrace em produção
    # Melhora a segurança, não revelando detalhes internos da aplicação
    include-stacktrace: never

# ======================== CONFIGURAÇÃO DE LOGGING ========================
# Define o nível de detalhe dos logs para diferentes componentes
logging:
  level:
    # DEBUG para o pacote da aplicação = Exibe logs detalhados
    # Útil para entender o fluxo da aplicação durante desenvolvimento
    com.gwchallenge: DEBUG
    # DEBUG para queries SQL do Hibernate
    # Exibe todas as queries executadas contra o banco de dados
    org.hibernate.SQL: DEBUG
    # INFO para o Spring Web
    # Exibe informações gerais sobre requisições HTTP
    org.springframework.web: INFO
    # INFO para o Spring Security
    org.springframework.security: INFO
